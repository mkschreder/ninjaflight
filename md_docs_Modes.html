<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>NinjaFlight: Modes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NinjaFlight
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_docs_Modes.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Modes </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Cleanflight has various modes that can be toggled on or off. Modes can be enabled/disabled by stick positions, auxillary receiver channels and other events such as failsafe detection.</p>
<table class="doxtable">
<tr>
<th>MSP ID </th><th>CLI ID </th><th>Short Name </th><th>Function  </th></tr>
<tr>
<td>0 </td><td>0 </td><td>ARM </td><td>Enables motors and flight stabilisation </td></tr>
<tr>
<td>1 </td><td>1 </td><td>ANGLE </td><td>Legacy auto-level flight mode </td></tr>
<tr>
<td>2 </td><td>2 </td><td>HORIZON </td><td>Auto-level flight mode </td></tr>
<tr>
<td>3 </td><td>3 </td><td>BARO </td><td>Altitude hold mode (Requires barometer sensor) </td></tr>
<tr>
<td>4 </td><td>N/A </td><td>VARIO </td><td>Unused </td></tr>
<tr>
<td>5 </td><td>4 </td><td>MAG </td><td>Heading lock </td></tr>
<tr>
<td>6 </td><td>5 </td><td>HEADFREE </td><td>Head Free - When enabled yaw has no effect on pitch/roll inputs </td></tr>
<tr>
<td>7 </td><td>6 </td><td>HEADADJ </td><td>Heading Adjust - Sets a new yaw origin for HEADFREE mode </td></tr>
<tr>
<td>8 </td><td>7 </td><td>CAMSTAB </td><td>Camera Stabilisation </td></tr>
<tr>
<td>9 </td><td>8 </td><td>CAMTRIG </td><td>Unused </td></tr>
<tr>
<td>10 </td><td>9 </td><td>GPSHOME </td><td>Autonomous flight to HOME position </td></tr>
<tr>
<td>11 </td><td>10 </td><td>GPSHOLD </td><td>Maintain the same longitude/lattitude </td></tr>
<tr>
<td>12 </td><td>11 </td><td>PASSTHRU </td><td>Pass roll, yaw, and pitch directly from rx to servos in airplane mix </td></tr>
<tr>
<td>13 </td><td>12 </td><td>BEEPERON </td><td>Enable beeping - useful for locating a crashed aircraft </td></tr>
<tr>
<td>14 </td><td>13 </td><td>LEDMAX </td><td></td></tr>
<tr>
<td>15 </td><td>14 </td><td>LEDLOW </td><td></td></tr>
<tr>
<td>16 </td><td>15 </td><td>LLIGHTS </td><td></td></tr>
<tr>
<td>17 </td><td>16 </td><td>CALIB </td><td></td></tr>
<tr>
<td>18 </td><td>17 </td><td>GOV </td><td>Unused </td></tr>
<tr>
<td>19 </td><td>18 </td><td>OSD </td><td>Enable/Disable On-Screen-Display (OSD) </td></tr>
<tr>
<td>20 </td><td>19 </td><td>TELEMETRY </td><td>Enable telemetry via switch </td></tr>
<tr>
<td>21 </td><td>20 </td><td>GTUNE </td><td>G-Tune - auto tuning of Pitch/Roll/Yaw P values </td></tr>
<tr>
<td>22 </td><td>21 </td><td>SONAR </td><td>Altitude hold mode (sonar sensor only) </td></tr>
<tr>
<td>23 </td><td>22 </td><td>SERVO1 </td><td>Servo 1 </td></tr>
<tr>
<td>24 </td><td>23 </td><td>SERVO2 </td><td>Servo 2 </td></tr>
<tr>
<td>25 </td><td>24 </td><td>SERVO3 </td><td>Servo 3 </td></tr>
<tr>
<td>26 </td><td>25 </td><td>BLACKBOX </td><td>Enable BlackBox logging </td></tr>
<tr>
<td>27 </td><td>26 </td><td>FAILSAFE </td><td>Enter failsafe stage 2 manually </td></tr>
<tr>
<td>28 </td><td>27 </td><td>AIRMODE </td><td>Alternative mixer and additional PID logic for more stable copter </td></tr>
</table>
<h2>Mode details</h2>
<h3>Headfree</h3>
<p>In this mode, the "head" of the multicopter is always pointing to the same direction as when the feature was activated. This means that when the multicopter rotates around the Z axis (yaw), the controls will always respond according the same "head" direction.</p>
<p>With this mode it is easier to control the multicopter, even fly it with the physical head towards you since the controls always respond the same. This is a friendly mode to new users of multicopters and can prevent losing the control when you don't know the head direction.</p>
<h3>GPS Return To Home</h3>
<p>WORK-IN-PROGRESS. This mode is not reliable yet, please share your experiences with the developers.</p>
<p>In this mode the aircraft attempts to return to the GPS position recorded when the aircraft was armed.</p>
<p>This mode should be enabled in conjunction with Angle or Horizon modes and an Altitude hold mode.</p>
<p>Requires a 3D GPS fix and minimum of 5 satellites in view.</p>
<h3>GPS Position Hold</h3>
<p>WORK-IN-PROGRESS. This mode is not reliable yet, please share your experiences with the developers.</p>
<p>In this mode the aircraft attempts to stay at the same GPS position, as recorded when the mode is enabled.</p>
<p>Disabling and re-enabling the mode will reset the GPS hold position.</p>
<p>This mode should be enabled in conjunction with Angle or Horizon modes and an Altitude hold mode.</p>
<p>Requires a 3D GPS fix and minimum of 5 satellites in view.</p>
<h2>Airmode</h2>
<p>In the standard mixer / mode, when the roll, pitch and yaw gets calculated and saturates a motor, all motors will be reduced equally. When motor goes below minimum it gets clipped off. Say you had your throttle just above minimum and tried to pull a quick roll - since two motors can't go any lower, you essentially get half the power (half of your PID gain). If your inputs would asked for more than 100% difference between the high and low motors, the low motors would get clipped, breaking the symmetry of the motor balance by unevenly reducing the gain. Airmode will enable full PID correction during zero throttle and give you ability for nice zero throttle gliding and actobatics. But also the cornering / turns will be much tighter now as there is always maximum possible correction performed. Airmode can also be enabled to work at all times by always putting it on the same switch like your arm switch or you can enable/disable it in air. Additional things and benefits: Airmode will additionally fully enable Iterm at zero throttle. Note that there is still some protection on the ground when throttle zeroed (below min_check) and roll/pitch sticks centered. This is a basic protection to limit motors spooling up on the ground. Also the Iterm will be reset above 70% of stick input in acro mode to prevent quick Iterm windups during finishes of rolls and flips, which will provide much cleaner and more natural stops of flips and rolls what again opens the ability to have higher I gains for some. Note that AIRMODE will also overrule motor stop function! It will basically also act as an idle up switch.</p>
<h2>Auxillary Configuration</h2>
<p>Spare auxillary receiver channels can be used to enable/disable modes. Some modes can only be enabled this way.</p>
<p>Configure your transmitter so that switches or dials (potentiometers) send channel data on channels 5 and upwards (the first 4 channels are usually occupied by the throttle, aileron, rudder, and elevator channels).</p>
<p><em>e.g. You can configure a 3 position switch to send 1000 when the switch is low, 1500 when the switch is in the middle and 2000 when the switch is high.</em></p>
<p>Configure your tx/rx channel limits to use values between 1000 and 2000. The range used by mode ranges is fixed to 900 to 2100.</p>
<p>When a channel is within a specifed range the corresponding mode is enabled.</p>
<p>Use the GUI configuration tool to allow easy configuration when channel.</p>
<h3>CLI</h3>
<p>There is a CLI command, <code>aux</code> that allows auxillary configuration. It takes 5 arguments as follows:</p>
<ul>
<li>AUD range slot number (0 - 39)</li>
<li>mode id (see mode list above)</li>
<li>AUX channel index (AUX1 = 0, AUX2 = 1,... etc)</li>
<li>low position, from 900 to 2100. Should be a multiple of 25.</li>
<li>high position, from 900 to 2100. Should be a multiple of 25.</li>
</ul>
<p>If the low and high position are the same then the values are ignored.</p>
<p>e.g.</p>
<p>Configure AUX range slot 0 to enable ARM when AUX1 is withing 1700 and 2100.</p>
<p>``` aux 0 0 0 1700 2100 ```</p>
<p>You can display the AUX configuration by using the <code>aux</code> command with no arguments. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Dec 12 2016 15:48:58 for NinjaFlight by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
