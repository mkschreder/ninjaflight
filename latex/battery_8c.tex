\hypertarget{battery_8c}{\section{src/main/sensors/battery.c File Reference}
\label{battery_8c}\index{src/main/sensors/battery.\+c@{src/main/sensors/battery.\+c}}
}
{\ttfamily \#include \char`\"{}stdbool.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}stdint.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}string.\+h\char`\"{}}\\*
{\ttfamily \#include $<$platform.\+h$>$}\\*
{\ttfamily \#include \char`\"{}common/maths.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}common/filter.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}drivers/adc.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}drivers/system.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}config/config.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}config/feature.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}sensors/battery.\+h\char`\"{}}\\*
Include dependency graph for battery.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{battery_8c__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{battery_8c_a01c614a1b1cfed2aa8e9bb1475764991}{V\+B\+A\+T\+T\+\_\+\+P\+R\+E\+S\+E\+N\+T\+\_\+\+T\+H\+R\+E\+S\+H\+O\+L\+D\+\_\+\+M\+V}~10
\item 
\#define \hyperlink{battery_8c_a494d609df1e3522c025c9812764a735e}{V\+B\+A\+T\+T\+\_\+\+L\+P\+F\+\_\+\+F\+R\+E\+Q}~1.\+0f
\item 
\#define \hyperlink{battery_8c_a0db34fc287e88ce64a989643c826682e}{V\+B\+A\+T\+T\+E\+R\+Y\+\_\+\+S\+T\+A\+B\+L\+E\+\_\+\+D\+E\+L\+A\+Y}~40
\item 
\#define \hyperlink{battery_8c_aa816207b6c699224cf56e6f827554847}{V\+B\+A\+T\+T\+\_\+\+H\+Y\+S\+T\+E\+R\+E\+S\+I\+S}~1
\item 
\#define \hyperlink{battery_8c_a69c551874284e9715a9b5d4d719e586d}{A\+D\+C\+V\+R\+E\+F}~3300
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{battery_8c_a78cc41ddb9d379ae1afef2065e41dc44}{battery\+\_\+init} (struct \hyperlink{structbattery}{battery} $\ast$self, const struct \hyperlink{structbattery__config}{battery\+\_\+config} $\ast$\hyperlink{structconfig}{config})
\item 
uint16\+\_\+t \hyperlink{battery_8c_a3a120e4163dcfc46cda498c8b9e313ed}{battery\+\_\+get\+\_\+voltage} (struct \hyperlink{structbattery}{battery} $\ast$self)
\item 
uint8\+\_\+t \hyperlink{battery_8c_a502c99e9f32b6c1f320784b5790e1aea}{battery\+\_\+get\+\_\+cell\+\_\+count} (struct \hyperlink{structbattery}{battery} $\ast$self)
\item 
int32\+\_\+t \hyperlink{battery_8c_a8273cfe279745f9bd3ba69dcbcc7656d}{battery\+\_\+get\+\_\+current} (struct \hyperlink{structbattery}{battery} $\ast$self)
\item 
int32\+\_\+t \hyperlink{battery_8c_af01025cfe5a73a80e4df8cca4914ba7e}{battery\+\_\+get\+\_\+spent\+\_\+capacity} (struct \hyperlink{structbattery}{battery} $\ast$self)
\item 
uint16\+\_\+t \hyperlink{battery_8c_adcfb5fd88ca16ac2cb83cdddd791bc60}{battery\+\_\+get\+\_\+cell\+\_\+voltage} (struct \hyperlink{structbattery}{battery} $\ast$self)
\item 
uint16\+\_\+t \hyperlink{battery_8c_a86fd892a3ca494c1e56413f2a60d485a}{\+\_\+battery\+\_\+adc\+\_\+to\+\_\+voltage} (struct \hyperlink{structbattery}{battery} $\ast$self, uint16\+\_\+t src)
\item 
void \hyperlink{battery_8c_a3e5619a6c49d4c1a1e49641ab6ec0ea0}{battery\+\_\+update} (struct \hyperlink{structbattery}{battery} $\ast$self)
\item 
\hyperlink{sensors_2battery_8h_a22b38b26763aa629baa29efb37a4e993}{battery\+\_\+state\+\_\+t} \hyperlink{battery_8c_a43ef2a13aac65b385b14a7b3394c30d8}{battery\+\_\+get\+\_\+state} (struct \hyperlink{structbattery}{battery} $\ast$self)
\item 
const char $\ast$ \hyperlink{battery_8c_aebb7d995762145ae1fb5ea05f46b19ac}{battery\+\_\+get\+\_\+state\+\_\+str} (struct \hyperlink{structbattery}{battery} $\ast$self)
\item 
void \hyperlink{battery_8c_a788a47c29fc6280fec9a99a7c23e0667}{battery\+\_\+update\+\_\+current\+\_\+meter} (struct \hyperlink{structbattery}{battery} $\ast$self, int32\+\_\+t last\+Update\+At)
\item 
uint8\+\_\+t \hyperlink{battery_8c_a688c7bed9516a7c2ac95b85e57016061}{battery\+\_\+get\+\_\+remaining\+\_\+percent} (struct \hyperlink{structbattery}{battery} $\ast$self)
\item 
uint8\+\_\+t \hyperlink{battery_8c_abda60c4e7c5d3308ce6ddc279cfd4e11}{battery\+\_\+get\+\_\+remaining\+\_\+capacity} (struct \hyperlink{structbattery}{battery} $\ast$self)
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{battery_8c_a69c551874284e9715a9b5d4d719e586d}{\index{battery.\+c@{battery.\+c}!A\+D\+C\+V\+R\+E\+F@{A\+D\+C\+V\+R\+E\+F}}
\index{A\+D\+C\+V\+R\+E\+F@{A\+D\+C\+V\+R\+E\+F}!battery.\+c@{battery.\+c}}
\subsubsection[{A\+D\+C\+V\+R\+E\+F}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\+D\+C\+V\+R\+E\+F~3300}}\label{battery_8c_a69c551874284e9715a9b5d4d719e586d}
\hypertarget{battery_8c_aa816207b6c699224cf56e6f827554847}{\index{battery.\+c@{battery.\+c}!V\+B\+A\+T\+T\+\_\+\+H\+Y\+S\+T\+E\+R\+E\+S\+I\+S@{V\+B\+A\+T\+T\+\_\+\+H\+Y\+S\+T\+E\+R\+E\+S\+I\+S}}
\index{V\+B\+A\+T\+T\+\_\+\+H\+Y\+S\+T\+E\+R\+E\+S\+I\+S@{V\+B\+A\+T\+T\+\_\+\+H\+Y\+S\+T\+E\+R\+E\+S\+I\+S}!battery.\+c@{battery.\+c}}
\subsubsection[{V\+B\+A\+T\+T\+\_\+\+H\+Y\+S\+T\+E\+R\+E\+S\+I\+S}]{\setlength{\rightskip}{0pt plus 5cm}\#define V\+B\+A\+T\+T\+\_\+\+H\+Y\+S\+T\+E\+R\+E\+S\+I\+S~1}}\label{battery_8c_aa816207b6c699224cf56e6f827554847}
\hypertarget{battery_8c_a494d609df1e3522c025c9812764a735e}{\index{battery.\+c@{battery.\+c}!V\+B\+A\+T\+T\+\_\+\+L\+P\+F\+\_\+\+F\+R\+E\+Q@{V\+B\+A\+T\+T\+\_\+\+L\+P\+F\+\_\+\+F\+R\+E\+Q}}
\index{V\+B\+A\+T\+T\+\_\+\+L\+P\+F\+\_\+\+F\+R\+E\+Q@{V\+B\+A\+T\+T\+\_\+\+L\+P\+F\+\_\+\+F\+R\+E\+Q}!battery.\+c@{battery.\+c}}
\subsubsection[{V\+B\+A\+T\+T\+\_\+\+L\+P\+F\+\_\+\+F\+R\+E\+Q}]{\setlength{\rightskip}{0pt plus 5cm}\#define V\+B\+A\+T\+T\+\_\+\+L\+P\+F\+\_\+\+F\+R\+E\+Q~1.\+0f}}\label{battery_8c_a494d609df1e3522c025c9812764a735e}
\hypertarget{battery_8c_a01c614a1b1cfed2aa8e9bb1475764991}{\index{battery.\+c@{battery.\+c}!V\+B\+A\+T\+T\+\_\+\+P\+R\+E\+S\+E\+N\+T\+\_\+\+T\+H\+R\+E\+S\+H\+O\+L\+D\+\_\+\+M\+V@{V\+B\+A\+T\+T\+\_\+\+P\+R\+E\+S\+E\+N\+T\+\_\+\+T\+H\+R\+E\+S\+H\+O\+L\+D\+\_\+\+M\+V}}
\index{V\+B\+A\+T\+T\+\_\+\+P\+R\+E\+S\+E\+N\+T\+\_\+\+T\+H\+R\+E\+S\+H\+O\+L\+D\+\_\+\+M\+V@{V\+B\+A\+T\+T\+\_\+\+P\+R\+E\+S\+E\+N\+T\+\_\+\+T\+H\+R\+E\+S\+H\+O\+L\+D\+\_\+\+M\+V}!battery.\+c@{battery.\+c}}
\subsubsection[{V\+B\+A\+T\+T\+\_\+\+P\+R\+E\+S\+E\+N\+T\+\_\+\+T\+H\+R\+E\+S\+H\+O\+L\+D\+\_\+\+M\+V}]{\setlength{\rightskip}{0pt plus 5cm}\#define V\+B\+A\+T\+T\+\_\+\+P\+R\+E\+S\+E\+N\+T\+\_\+\+T\+H\+R\+E\+S\+H\+O\+L\+D\+\_\+\+M\+V~10}}\label{battery_8c_a01c614a1b1cfed2aa8e9bb1475764991}
\hypertarget{battery_8c_a0db34fc287e88ce64a989643c826682e}{\index{battery.\+c@{battery.\+c}!V\+B\+A\+T\+T\+E\+R\+Y\+\_\+\+S\+T\+A\+B\+L\+E\+\_\+\+D\+E\+L\+A\+Y@{V\+B\+A\+T\+T\+E\+R\+Y\+\_\+\+S\+T\+A\+B\+L\+E\+\_\+\+D\+E\+L\+A\+Y}}
\index{V\+B\+A\+T\+T\+E\+R\+Y\+\_\+\+S\+T\+A\+B\+L\+E\+\_\+\+D\+E\+L\+A\+Y@{V\+B\+A\+T\+T\+E\+R\+Y\+\_\+\+S\+T\+A\+B\+L\+E\+\_\+\+D\+E\+L\+A\+Y}!battery.\+c@{battery.\+c}}
\subsubsection[{V\+B\+A\+T\+T\+E\+R\+Y\+\_\+\+S\+T\+A\+B\+L\+E\+\_\+\+D\+E\+L\+A\+Y}]{\setlength{\rightskip}{0pt plus 5cm}\#define V\+B\+A\+T\+T\+E\+R\+Y\+\_\+\+S\+T\+A\+B\+L\+E\+\_\+\+D\+E\+L\+A\+Y~40}}\label{battery_8c_a0db34fc287e88ce64a989643c826682e}


\subsection{Function Documentation}
\hypertarget{battery_8c_a86fd892a3ca494c1e56413f2a60d485a}{\index{battery.\+c@{battery.\+c}!\+\_\+battery\+\_\+adc\+\_\+to\+\_\+voltage@{\+\_\+battery\+\_\+adc\+\_\+to\+\_\+voltage}}
\index{\+\_\+battery\+\_\+adc\+\_\+to\+\_\+voltage@{\+\_\+battery\+\_\+adc\+\_\+to\+\_\+voltage}!battery.\+c@{battery.\+c}}
\subsubsection[{\+\_\+battery\+\_\+adc\+\_\+to\+\_\+voltage}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t \+\_\+battery\+\_\+adc\+\_\+to\+\_\+voltage (
\begin{DoxyParamCaption}
\item[{struct {\bf battery} $\ast$}]{self, }
\item[{uint16\+\_\+t}]{src}
\end{DoxyParamCaption}
)}}\label{battery_8c_a86fd892a3ca494c1e56413f2a60d485a}
\hypertarget{battery_8c_a502c99e9f32b6c1f320784b5790e1aea}{\index{battery.\+c@{battery.\+c}!battery\+\_\+get\+\_\+cell\+\_\+count@{battery\+\_\+get\+\_\+cell\+\_\+count}}
\index{battery\+\_\+get\+\_\+cell\+\_\+count@{battery\+\_\+get\+\_\+cell\+\_\+count}!battery.\+c@{battery.\+c}}
\subsubsection[{battery\+\_\+get\+\_\+cell\+\_\+count}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t battery\+\_\+get\+\_\+cell\+\_\+count (
\begin{DoxyParamCaption}
\item[{struct {\bf battery} $\ast$}]{self}
\end{DoxyParamCaption}
)}}\label{battery_8c_a502c99e9f32b6c1f320784b5790e1aea}
\hypertarget{battery_8c_adcfb5fd88ca16ac2cb83cdddd791bc60}{\index{battery.\+c@{battery.\+c}!battery\+\_\+get\+\_\+cell\+\_\+voltage@{battery\+\_\+get\+\_\+cell\+\_\+voltage}}
\index{battery\+\_\+get\+\_\+cell\+\_\+voltage@{battery\+\_\+get\+\_\+cell\+\_\+voltage}!battery.\+c@{battery.\+c}}
\subsubsection[{battery\+\_\+get\+\_\+cell\+\_\+voltage}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t battery\+\_\+get\+\_\+cell\+\_\+voltage (
\begin{DoxyParamCaption}
\item[{struct {\bf battery} $\ast$}]{self}
\end{DoxyParamCaption}
)}}\label{battery_8c_adcfb5fd88ca16ac2cb83cdddd791bc60}
\hypertarget{battery_8c_a8273cfe279745f9bd3ba69dcbcc7656d}{\index{battery.\+c@{battery.\+c}!battery\+\_\+get\+\_\+current@{battery\+\_\+get\+\_\+current}}
\index{battery\+\_\+get\+\_\+current@{battery\+\_\+get\+\_\+current}!battery.\+c@{battery.\+c}}
\subsubsection[{battery\+\_\+get\+\_\+current}]{\setlength{\rightskip}{0pt plus 5cm}int32\+\_\+t battery\+\_\+get\+\_\+current (
\begin{DoxyParamCaption}
\item[{struct {\bf battery} $\ast$}]{self}
\end{DoxyParamCaption}
)}}\label{battery_8c_a8273cfe279745f9bd3ba69dcbcc7656d}
\hypertarget{battery_8c_abda60c4e7c5d3308ce6ddc279cfd4e11}{\index{battery.\+c@{battery.\+c}!battery\+\_\+get\+\_\+remaining\+\_\+capacity@{battery\+\_\+get\+\_\+remaining\+\_\+capacity}}
\index{battery\+\_\+get\+\_\+remaining\+\_\+capacity@{battery\+\_\+get\+\_\+remaining\+\_\+capacity}!battery.\+c@{battery.\+c}}
\subsubsection[{battery\+\_\+get\+\_\+remaining\+\_\+capacity}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t battery\+\_\+get\+\_\+remaining\+\_\+capacity (
\begin{DoxyParamCaption}
\item[{struct {\bf battery} $\ast$}]{self}
\end{DoxyParamCaption}
)}}\label{battery_8c_abda60c4e7c5d3308ce6ddc279cfd4e11}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=286pt]{battery_8c_abda60c4e7c5d3308ce6ddc279cfd4e11_cgraph}
\end{center}
\end{figure}


\hypertarget{battery_8c_a688c7bed9516a7c2ac95b85e57016061}{\index{battery.\+c@{battery.\+c}!battery\+\_\+get\+\_\+remaining\+\_\+percent@{battery\+\_\+get\+\_\+remaining\+\_\+percent}}
\index{battery\+\_\+get\+\_\+remaining\+\_\+percent@{battery\+\_\+get\+\_\+remaining\+\_\+percent}!battery.\+c@{battery.\+c}}
\subsubsection[{battery\+\_\+get\+\_\+remaining\+\_\+percent}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t battery\+\_\+get\+\_\+remaining\+\_\+percent (
\begin{DoxyParamCaption}
\item[{struct {\bf battery} $\ast$}]{self}
\end{DoxyParamCaption}
)}}\label{battery_8c_a688c7bed9516a7c2ac95b85e57016061}
\hypertarget{battery_8c_af01025cfe5a73a80e4df8cca4914ba7e}{\index{battery.\+c@{battery.\+c}!battery\+\_\+get\+\_\+spent\+\_\+capacity@{battery\+\_\+get\+\_\+spent\+\_\+capacity}}
\index{battery\+\_\+get\+\_\+spent\+\_\+capacity@{battery\+\_\+get\+\_\+spent\+\_\+capacity}!battery.\+c@{battery.\+c}}
\subsubsection[{battery\+\_\+get\+\_\+spent\+\_\+capacity}]{\setlength{\rightskip}{0pt plus 5cm}int32\+\_\+t battery\+\_\+get\+\_\+spent\+\_\+capacity (
\begin{DoxyParamCaption}
\item[{struct {\bf battery} $\ast$}]{self}
\end{DoxyParamCaption}
)}}\label{battery_8c_af01025cfe5a73a80e4df8cca4914ba7e}
\hypertarget{battery_8c_a43ef2a13aac65b385b14a7b3394c30d8}{\index{battery.\+c@{battery.\+c}!battery\+\_\+get\+\_\+state@{battery\+\_\+get\+\_\+state}}
\index{battery\+\_\+get\+\_\+state@{battery\+\_\+get\+\_\+state}!battery.\+c@{battery.\+c}}
\subsubsection[{battery\+\_\+get\+\_\+state}]{\setlength{\rightskip}{0pt plus 5cm}{\bf battery\+\_\+state\+\_\+t} battery\+\_\+get\+\_\+state (
\begin{DoxyParamCaption}
\item[{struct {\bf battery} $\ast$}]{self}
\end{DoxyParamCaption}
)}}\label{battery_8c_a43ef2a13aac65b385b14a7b3394c30d8}
\hypertarget{battery_8c_aebb7d995762145ae1fb5ea05f46b19ac}{\index{battery.\+c@{battery.\+c}!battery\+\_\+get\+\_\+state\+\_\+str@{battery\+\_\+get\+\_\+state\+\_\+str}}
\index{battery\+\_\+get\+\_\+state\+\_\+str@{battery\+\_\+get\+\_\+state\+\_\+str}!battery.\+c@{battery.\+c}}
\subsubsection[{battery\+\_\+get\+\_\+state\+\_\+str}]{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ battery\+\_\+get\+\_\+state\+\_\+str (
\begin{DoxyParamCaption}
\item[{struct {\bf battery} $\ast$}]{self}
\end{DoxyParamCaption}
)}}\label{battery_8c_aebb7d995762145ae1fb5ea05f46b19ac}
\hypertarget{battery_8c_a3a120e4163dcfc46cda498c8b9e313ed}{\index{battery.\+c@{battery.\+c}!battery\+\_\+get\+\_\+voltage@{battery\+\_\+get\+\_\+voltage}}
\index{battery\+\_\+get\+\_\+voltage@{battery\+\_\+get\+\_\+voltage}!battery.\+c@{battery.\+c}}
\subsubsection[{battery\+\_\+get\+\_\+voltage}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t battery\+\_\+get\+\_\+voltage (
\begin{DoxyParamCaption}
\item[{struct {\bf battery} $\ast$}]{self}
\end{DoxyParamCaption}
)}}\label{battery_8c_a3a120e4163dcfc46cda498c8b9e313ed}
\hypertarget{battery_8c_a78cc41ddb9d379ae1afef2065e41dc44}{\index{battery.\+c@{battery.\+c}!battery\+\_\+init@{battery\+\_\+init}}
\index{battery\+\_\+init@{battery\+\_\+init}!battery.\+c@{battery.\+c}}
\subsubsection[{battery\+\_\+init}]{\setlength{\rightskip}{0pt plus 5cm}void battery\+\_\+init (
\begin{DoxyParamCaption}
\item[{struct {\bf battery} $\ast$}]{self, }
\item[{const struct {\bf battery\+\_\+config} $\ast$}]{config}
\end{DoxyParamCaption}
)}}\label{battery_8c_a78cc41ddb9d379ae1afef2065e41dc44}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=266pt]{battery_8c_a78cc41ddb9d379ae1afef2065e41dc44_cgraph}
\end{center}
\end{figure}


\hypertarget{battery_8c_a3e5619a6c49d4c1a1e49641ab6ec0ea0}{\index{battery.\+c@{battery.\+c}!battery\+\_\+update@{battery\+\_\+update}}
\index{battery\+\_\+update@{battery\+\_\+update}!battery.\+c@{battery.\+c}}
\subsubsection[{battery\+\_\+update}]{\setlength{\rightskip}{0pt plus 5cm}void battery\+\_\+update (
\begin{DoxyParamCaption}
\item[{struct {\bf battery} $\ast$}]{self}
\end{DoxyParamCaption}
)}}\label{battery_8c_a3e5619a6c49d4c1a1e49641ab6ec0ea0}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{battery_8c_a3e5619a6c49d4c1a1e49641ab6ec0ea0_cgraph}
\end{center}
\end{figure}


\hypertarget{battery_8c_a788a47c29fc6280fec9a99a7c23e0667}{\index{battery.\+c@{battery.\+c}!battery\+\_\+update\+\_\+current\+\_\+meter@{battery\+\_\+update\+\_\+current\+\_\+meter}}
\index{battery\+\_\+update\+\_\+current\+\_\+meter@{battery\+\_\+update\+\_\+current\+\_\+meter}!battery.\+c@{battery.\+c}}
\subsubsection[{battery\+\_\+update\+\_\+current\+\_\+meter}]{\setlength{\rightskip}{0pt plus 5cm}void battery\+\_\+update\+\_\+current\+\_\+meter (
\begin{DoxyParamCaption}
\item[{struct {\bf battery} $\ast$}]{self, }
\item[{int32\+\_\+t}]{last\+Update\+At}
\end{DoxyParamCaption}
)}}\label{battery_8c_a788a47c29fc6280fec9a99a7c23e0667}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=316pt]{battery_8c_a788a47c29fc6280fec9a99a7c23e0667_cgraph}
\end{center}
\end{figure}


