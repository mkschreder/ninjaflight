The Open\+Pilot Copter Control 3\+D aka C\+C3\+D is a board more tuned to Acrobatic flying or G\+P\+S based auto-\/piloting. It only has one sensor, the M\+P\+U6000 S\+P\+I based Accelerometer/\+Gyro. It also features a 16\+Mbit S\+P\+I based E\+E\+P\+R\+O\+M chip. It has 6 ports labeled as inputs (one pin each) and 6 ports labeled as motor/servo outputs (3 pins each).

If issues are found with this board please report via the \href{https://github.com/cleanflight/cleanflight/issues}{\tt github issue tracker}.

The board has a U\+S\+B port directly connected to the processor. Other boards like the Naze and Flip32 have an on-\/board U\+S\+B to uart adapter which connect to the processor's serial port instead.

The board cannot currently be used for hexacopters/octocopters.

Tricopter \& Airplane support is untested, please report success or failure if you try it.

\section*{Pinouts}

The 8 pin R\+C\+\_\+\+Input connector has the following pinouts when used in R\+X\+\_\+\+P\+P\+M/\+R\+X\+\_\+\+S\+E\+R\+I\+A\+L mode

\begin{TabularC}{3}
\hline
\rowcolor{lightgray}{\bf Pin }&{\bf Function }&{\bf Notes  }\\\cline{1-3}
1 &Ground &\\\cline{1-3}
2 &+5\+V &\\\cline{1-3}
3 &Unused &\\\cline{1-3}
4 &Soft\+Serial1 T\+X / Sonar trigger &\\\cline{1-3}
5 &Soft\+Serial1 R\+X / Sonar Echo / R\+S\+S\+I\+\_\+\+A\+D\+C &Used either for S\+O\+F\+T\+S\+E\+R\+I\+A\+L, S\+O\+N\+A\+R or R\+S\+S\+I\+\_\+\+A\+D\+C$\ast$. Only one feature can be enabled at any time. \\\cline{1-3}
6 &Current &Enable {\ttfamily feature C\+U\+R\+R\+E\+N\+T\+\_\+\+M\+E\+T\+E\+R}. Connect to the output of a current sensor, 0v-\/3.\+3v input \\\cline{1-3}
7 &Battery Voltage sensor &Enable {\ttfamily feature V\+B\+A\+T}. Connect to main battery using a voltage divider, 0v-\/3.\+3v input \\\cline{1-3}
8 &P\+P\+M Input &Enable {\ttfamily feature R\+X\+\_\+\+P\+P\+M} \\\cline{1-3}
\end{TabularC}
$\ast$\+Connect to the output of a P\+W\+M-\/\+R\+S\+S\+I conditioner, 0v-\/3.\+3v input.

The 6 pin R\+C\+\_\+\+Output connector has the following pinouts when used in R\+X\+\_\+\+P\+P\+M/\+R\+X\+\_\+\+S\+E\+R\+I\+A\+L mode

\begin{TabularC}{3}
\hline
\rowcolor{lightgray}{\bf Pin }&{\bf Function }&{\bf Notes  }\\\cline{1-3}
1 &M\+O\+T\+O\+R 1 &\\\cline{1-3}
2 &M\+O\+T\+O\+R 2 &\\\cline{1-3}
3 &M\+O\+T\+O\+R 3 &\\\cline{1-3}
4 &M\+O\+T\+O\+R 4 &\\\cline{1-3}
5 &L\+E\+D Strip &\\\cline{1-3}
6 &Unused &\\\cline{1-3}
\end{TabularC}
The 8 pin R\+C\+\_\+\+Input connector has the following pinouts when used in R\+X\+\_\+\+P\+A\+R\+A\+L\+L\+E\+L\+\_\+\+P\+W\+M mode

\begin{TabularC}{3}
\hline
\rowcolor{lightgray}{\bf Pin }&{\bf Function }&{\bf Notes  }\\\cline{1-3}
1 &Ground &\\\cline{1-3}
2 &+5\+V &\\\cline{1-3}
3 &Unused &\\\cline{1-3}
4 &C\+H1 &\\\cline{1-3}
5 &C\+H2 &\\\cline{1-3}
6 &C\+H3 &\\\cline{1-3}
7 &C\+H4/\+Battery Voltage sensor &C\+H4 if battery voltage sensor is disabled \\\cline{1-3}
8 &C\+H5/\+C\+H4 &C\+H4 if battery voltage monitor is enabled \\\cline{1-3}
\end{TabularC}
The 6 pin R\+C\+\_\+\+Output connector has the following pinouts when used in R\+X\+\_\+\+P\+A\+R\+A\+L\+L\+E\+L\+\_\+\+P\+W\+M mode

\begin{TabularC}{3}
\hline
\rowcolor{lightgray}{\bf Pin }&{\bf Function }&{\bf Notes  }\\\cline{1-3}
1 &M\+O\+T\+O\+R 1 &\\\cline{1-3}
2 &M\+O\+T\+O\+R 2 &\\\cline{1-3}
3 &M\+O\+T\+O\+R 3 &\\\cline{1-3}
4 &M\+O\+T\+O\+R 4 &\\\cline{1-3}
5 &Unused &\\\cline{1-3}
6 &Unused &\\\cline{1-3}
\end{TabularC}
\section*{Serial Ports}

\begin{TabularC}{4}
\hline
\rowcolor{lightgray}{\bf Value }&{\bf Identifier }&{\bf Board Markings }&{\bf Notes  }\\\cline{1-4}
1 &V\+C\+P &U\+S\+B P\+O\+R\+T &\\\cline{1-4}
2 &U\+S\+A\+R\+T1 &M\+A\+I\+N P\+O\+R\+T &Connected to an M\+C\+U controllable inverter \\\cline{1-4}
3 &U\+S\+A\+R\+T3 &F\+L\+E\+X P\+O\+R\+T &\\\cline{1-4}
4 &Soft\+Serial &R\+C connector &Pins 4 and 5 (Tx and Rx respectively) \\\cline{1-4}
\end{TabularC}
The Soft\+Serial port is not available when R\+X\+\_\+\+P\+A\+R\+A\+L\+L\+E\+L\+\_\+\+P\+W\+M is used. The transmission data rate is limited to 19200 baud.

To connect the G\+U\+I to the flight controller you just need a U\+S\+B cable to use the Virtual Com Port (V\+C\+P) or you can use U\+A\+R\+T1 (Main Port).

C\+L\+I access is only available via the V\+C\+P by default.

\section*{Main Port}

The main port has M\+S\+P support enabled on it by default.

The main port is connected to an inverter which is automatically enabled as required. For example, if the main port is used for S\+Bus Serial R\+X then an external inverter is not required.

\section*{Flex Port}

The flex port will be enabled in I2\+C mode unless U\+S\+A\+R\+T3 is used. You can connect external I2\+C sensors and displays to this port.

You cannot use U\+S\+A\+R\+T3 and I2\+C at the same time.

\subsection*{Flex port pinout}

\begin{TabularC}{3}
\hline
\rowcolor{lightgray}{\bf Pin }&{\bf Signal }&{\bf Notes  }\\\cline{1-3}
1 &G\+N\+D &\\\cline{1-3}
2 &V\+C\+C unregulated &\\\cline{1-3}
3 &I2\+C S\+C\+L / U\+A\+R\+T3 T\+X &3.\+3v level \\\cline{1-3}
4 &I2\+C S\+D\+A / U\+A\+R\+T3 R\+X &3.\+3v level (5v tolerant \\\cline{1-3}
\end{TabularC}


\section*{Flashing}

There are two primary ways to get Cleanflight onto a C\+C3\+D board.


\begin{DoxyItemize}
\item Single binary image mode -\/ best mode if you don't want to use Open\+Pilot.
\item Open\+Pilot Bootloader compatible image mode -\/ best mode if you want to switch between Open\+Pilot and Cleanflight.
\end{DoxyItemize}

\subsection*{Single binary image mode.}

The entire flash ram on the target processor is flashed with a single image.

The image can be flashed by using a U\+S\+B to U\+A\+R\+T adapter connected to the main port when the C\+C3\+D is put into the S\+T\+M32 bootloader mode, achieved by powering on the C\+C3\+D with the S\+B\+L/3.\+3v pads bridged.

\subsection*{Open\+Pilot Bootloader compatible image mode.}

The initial section of flash ram on the target process is flashed with a bootloader which can then run the code in the remaining area of flash ram.

The Open\+Pilot bootloader code also allows the remaining section of flash to be reconfigured and re-\/flashed by the Open\+Pilot Ground Station (G\+C\+S) via U\+S\+B without requiring a U\+S\+B to uart adapter.

The following features are not available\+:
\begin{DoxyItemize}
\item Display
\item Sonar
\end{DoxyItemize}

\section*{Restoring Open\+Pilot bootloader}

If you have a J\+Link debugger, you can use J\+Link\+Exe to flash the open pilot bootloader.


\begin{DoxyEnumerate}
\item Run J\+Link\+Exe {\ttfamily /\+Applications/\+S\+E\+G\+G\+E\+R/\+J\+Link/\+J\+Link\+Exe}
\item {\ttfamily device S\+T\+M32\+F103\+C\+B}
\item {\ttfamily r}
\item {\ttfamily h}
\item {\ttfamily loadbin opbl.\+bin, 0x08000000}
\item {\ttfamily q}
\item Re-\/plug C\+C3\+D.
\end{DoxyEnumerate}

Here's an example session\+:

``` \$ /\+Applications/\+S\+E\+G\+G\+E\+R/\+J\+Link/\+J\+Link\+Exe S\+E\+G\+G\+E\+R J-\/\+Link Commander V4.\+90c ('?' for help) Compiled Aug 29 2014 09\+:52\+:38 D\+L\+L version V4.\+90c, compiled Aug 29 2014 09\+:52\+:33 Firmware\+: J-\/\+Link A\+R\+M-\/\+O\+B S\+T\+M32 compiled Aug 22 2012 19\+:52\+:04 Hardware\+: V7.\+00 S/\+N\+: -\/1 Feature(s)\+: R\+D\+I,Flash\+D\+L,Flash\+B\+P,J\+Flash,G\+D\+B\+Full V\+Target = 3.\+300\+V Info\+: Could not measure total I\+R len. T\+D\+O is constant high. Info\+: Could not measure total I\+R len. T\+D\+O is constant high. No devices found on J\+T\+A\+G chain. Trying to find device on S\+W\+D. Info\+: Found S\+W\+D-\/\+D\+P with I\+D 0x1\+B\+A01477 Info\+: Found Cortex-\/\+M3 r1p1, Little endian. Info\+: F\+P\+Unit\+: 6 code (B\+P) slots and 2 literal slots Info\+: T\+P\+I\+U fitted. Cortex-\/\+M3 identified. Target interface speed\+: 100 k\+Hz J-\/\+Link$>$device S\+T\+M32\+F103\+C\+B Info\+: Device \char`\"{}\+S\+T\+M32\+F103\+C\+B\char`\"{} selected (128 K\+B flash, 20 K\+B R\+A\+M). Reconnecting to target... Info\+: Found S\+W\+D-\/\+D\+P with I\+D 0x1\+B\+A01477 Info\+: Found S\+W\+D-\/\+D\+P with I\+D 0x1\+B\+A01477 Info\+: Found Cortex-\/\+M3 r1p1, Little endian. Info\+: F\+P\+Unit\+: 6 code (B\+P) slots and 2 literal slots Info\+: T\+P\+I\+U fitted. J-\/\+Link$>$r Reset delay\+: 0 ms Reset type N\+O\+R\+M\+A\+L\+: Resets core \& peripherals via S\+Y\+S\+R\+E\+S\+E\+T\+R\+E\+Q \& V\+E\+C\+T\+R\+E\+S\+E\+T bit. J-\/\+Link$>$h P\+C = 0800010\+C, Cycle\+Cnt = 00000000 R0 = 0000000\+C, R1 = 0000003\+F, R2 = 00000000, R3 = 00000008 R4 = 00003000, R5 = 023\+A\+C\+E\+F\+C, R6 = 200000\+F0, R7 = 20000304 R8 = 023\+B92\+B\+C, R9 = 00000000, R10= E\+D691105, R11= F626177\+C R12= 000\+F0000 S\+P(\+R13)= 20000934, M\+S\+P= 20000934, P\+S\+P= 20000934, R14(\+L\+R) = F\+F\+F\+F\+F\+F\+F\+F X\+P\+S\+R = 01000000\+: A\+P\+S\+R = nzcvq, E\+P\+S\+R = 01000000, I\+P\+S\+R = 000 (No\+Exception) C\+F\+B\+P = 00000000, C\+O\+N\+T\+R\+O\+L = 00, F\+A\+U\+L\+T\+M\+A\+S\+K = 00, B\+A\+S\+E\+P\+R\+I = 00, P\+R\+I\+M\+A\+S\+K = 00 J-\/\+Link$>$loadbin opbl.\+bin, 0x08000000 Downloading file \mbox{[}opbl.\+bin\mbox{]}... W\+A\+R\+N\+I\+N\+G\+: C\+P\+U is running at low speed (8004 k\+Hz). Info\+: J-\/\+Link\+: Flash download\+: Flash download into internal flash skipped. Flash contents already match Info\+: J-\/\+Link\+: Flash download\+: Total time needed\+: 0.\+898s (Prepare\+: 0.\+709s, Compare\+: 0.\+128s, Erase\+: 0.\+000s, Program\+: 0.\+000s, Verify\+: 0.\+000s, Restore\+: 0.\+059s) O.\+K. J-\/\+Link$>$q \$ ``` 