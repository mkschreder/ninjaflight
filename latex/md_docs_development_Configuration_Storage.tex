The configuration in cleanflight is stored at the end of the flash ram, currently it uses 2-\/4\+K\+B of flash depending on the target.

Sometimes it's necessary to erase this during development.

\subsection*{Erasing}

Generate a 2-\/4kb blank file.

2kb\+: ``` dd if=/dev/zero of=obj/blankconfig.\+bin bs=1024 count=2 ```

4kb\+: ``` dd if=/dev/zero of=obj/blankconfig.\+bin bs=1024 count=4 ```

Overwrite configuration using J\+Link

Run J\+Link (O\+S\+X\+: {\ttfamily /\+Applications/\+S\+E\+G\+G\+E\+R/\+J\+Link/\+J\+Link\+Exe})

Execute commands {\ttfamily device $<$your device$>$}, e.\+g. {\ttfamily S\+T\+M32\+F303\+C\+B} {\ttfamily r} {\ttfamily h} {\ttfamily loadbin obj/blankconfig.\+bin, $<$address$>$} {\ttfamily r} to Reboot F\+C. {\ttfamily q} to quit

the address is the address of the end of the flash ram minus the size of the configuration.

example addresses\+: ``` 64k device/2kb config = 0x800\+F800 128k device/2kb config = 0x801\+F800 128k device/4kb config = 0x801\+F000 256k device/2kb config = 0x803f800 256k device/4kb config = 0x803f000 ```

Example session

``` \$ /\+Applications/\+S\+E\+G\+G\+E\+R/\+J\+Link/\+J\+Link\+Exe S\+E\+G\+G\+E\+R J-\/\+Link Commander V4.\+90c ('?' for help) Compiled Aug 29 2014 09\+:52\+:38 D\+L\+L version V4.\+90c, compiled Aug 29 2014 09\+:52\+:33 Firmware\+: J-\/\+Link A\+R\+M-\/\+O\+B S\+T\+M32 compiled Aug 22 2012 19\+:52\+:04 Hardware\+: V7.\+00 S/\+N\+: -\/1 Feature(s)\+: R\+D\+I,Flash\+D\+L,Flash\+B\+P,J\+Flash,G\+D\+B\+Full V\+Target = 3.\+300\+V Info\+: Could not measure total I\+R len. T\+D\+O is constant high. Info\+: Could not measure total I\+R len. T\+D\+O is constant high. No devices found on J\+T\+A\+G chain. Trying to find device on S\+W\+D. Info\+: Found S\+W\+D-\/\+D\+P with I\+D 0x2\+B\+A01477 Info\+: Found Cortex-\/\+M4 r0p1, Little endian. Info\+: F\+P\+Unit\+: 6 code (B\+P) slots and 2 literal slots Info\+: T\+P\+I\+U fitted. Info\+: E\+T\+M fitted. Cortex-\/\+M4 identified. Target interface speed\+: 100 k\+Hz J-\/\+Link$>$device S\+T\+M32\+F303\+C\+C Info\+: Device \char`\"{}\+S\+T\+M32\+F303\+C\+C\char`\"{} selected (256 K\+B flash, 32 K\+B R\+A\+M). Reconnecting to target... Info\+: Found S\+W\+D-\/\+D\+P with I\+D 0x2\+B\+A01477 Info\+: Found S\+W\+D-\/\+D\+P with I\+D 0x2\+B\+A01477 Info\+: Found Cortex-\/\+M4 r0p1, Little endian. Info\+: F\+P\+Unit\+: 6 code (B\+P) slots and 2 literal slots Info\+: T\+P\+I\+U fitted. Info\+: E\+T\+M fitted. J-\/\+Link$>$r Reset delay\+: 0 ms Reset type N\+O\+R\+M\+A\+L\+: Resets core \& peripherals via S\+Y\+S\+R\+E\+S\+E\+T\+R\+E\+Q \& V\+E\+C\+T\+R\+E\+S\+E\+T bit. J-\/\+Link$>$h P\+C = 08001154, Cycle\+Cnt = 00000000 R0 = 00000000, R1 = 00000000, R2 = 00000000, R3 = 00000000 R4 = 00000000, R5 = 00000000, R6 = 00000000, R7 = 00000000 R8 = 00000000, R9 = 00000000, R10= 00000000, R11= 00000000 R12= 00000000 S\+P(\+R13)= 2000\+A000, M\+S\+P= 2000\+A000, P\+S\+P= 00000000, R14(\+L\+R) = F\+F\+F\+F\+F\+F\+F\+F X\+P\+S\+R = 01000000\+: A\+P\+S\+R = nzcvq, E\+P\+S\+R = 01000000, I\+P\+S\+R = 000 (No\+Exception) C\+F\+B\+P = 00000000, C\+O\+N\+T\+R\+O\+L = 00, F\+A\+U\+L\+T\+M\+A\+S\+K = 00, B\+A\+S\+E\+P\+R\+I = 00, P\+R\+I\+M\+A\+S\+K = 00 F\+P\+U regs\+: F\+P\+U not enabled / not implemented on connected C\+P\+U. J-\/\+Link$>$loadbin obj/blankconfig.\+bin, 0x803f800 Downloading file \mbox{[}obj/blankconfig.\+bin\mbox{]}... W\+A\+R\+N\+I\+N\+G\+: C\+P\+U is running at low speed (7989 k\+Hz). Info\+: J-\/\+Link\+: Flash download\+: Flash programming performed for 1 range (2048 bytes) Info\+: J-\/\+Link\+: Flash download\+: Total time needed\+: 1.\+254s (Prepare\+: 0.\+698s, Compare\+: 0.\+009s, Erase\+: 0.\+075s, Program\+: 0.\+405s, Verify\+: 0.\+005s, Restore\+: 0.\+059s) O.\+K. J-\/\+Link$>$r Reset delay\+: 0 ms Reset type N\+O\+R\+M\+A\+L\+: Resets core \& peripherals via S\+Y\+S\+R\+E\+S\+E\+T\+R\+E\+Q \& V\+E\+C\+T\+R\+E\+S\+E\+T bit. J-\/\+Link$>$q ``` 