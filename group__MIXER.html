<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>NinjaFlight: Mixer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NinjaFlight
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__MIXER.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Mixer</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga8f455127e5b0a5e7f8f3e1b9df164f3c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MIXER.html#ga8f455127e5b0a5e7f8f3e1b9df164f3c">mixer_flags</a> { <a class="el" href="group__MIXER.html#gga8f455127e5b0a5e7f8f3e1b9df164f3ca336b47f092a05ec681ab024a7b25fe9e">MIXER_FLAG_ARMED</a> = (1 &lt;&lt; 3)
 }</td></tr>
<tr class="separator:ga8f455127e5b0a5e7f8f3e1b9df164f3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga1ac8758754f82b6ad750ed377c154733"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MIXER.html#ga1ac8758754f82b6ad750ed377c154733">mixer_init</a> (struct <a class="el" href="structmixer.html">mixer</a> *self, const struct <a class="el" href="structconfig.html">config</a> const *<a class="el" href="structconfig.html">config</a>, const struct <a class="el" href="structsystem__calls__pwm.html">system_calls_pwm</a> *pwm)</td></tr>
<tr class="separator:ga1ac8758754f82b6ad750ed377c154733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadc257851e57bc3de20fe776f8fca0a78"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MIXER.html#gadc257851e57bc3de20fe776f8fca0a78">mixer_clear_rules</a> (struct <a class="el" href="structmixer.html">mixer</a> *self)</td></tr>
<tr class="memdesc:gadc257851e57bc3de20fe776f8fca0a78"><td class="mdescLeft">&#160;</td><td class="mdescRight">saves motor mixer into cleanflight motor mixer format  <a href="#gadc257851e57bc3de20fe776f8fca0a78">More...</a><br /></td></tr>
<tr class="separator:gadc257851e57bc3de20fe776f8fca0a78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaedfa8863c1b4819082c4349bc4f053be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MIXER.html#gaedfa8863c1b4819082c4349bc4f053be">mixer_input_command</a> (struct <a class="el" href="structmixer.html">mixer</a> *self, <a class="el" href="config_2mixer_8h.html#a0d4a27769492fd12822190587e6b482a">mixer_input_t</a> channel, int16_t value)</td></tr>
<tr class="memdesc:gaedfa8863c1b4819082c4349bc4f053be"><td class="mdescLeft">&#160;</td><td class="mdescRight">inputs a command to one of the input channels of the mixer  <a href="#gaedfa8863c1b4819082c4349bc4f053be">More...</a><br /></td></tr>
<tr class="separator:gaedfa8863c1b4819082c4349bc4f053be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabff36b1d8ccaf72b089c8776573a00e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MIXER.html#gabff36b1d8ccaf72b089c8776573a00e8">mixer_set_throttle_range</a> (struct <a class="el" href="structmixer.html">mixer</a> *self, int16_t mid, int16_t <a class="el" href="config_2rx_8h.html#a1a1f4624f66ab0b2eb0b98316514c369">min</a>, int16_t <a class="el" href="config_2rx_8h.html#ac66b569507cc273bbf83ce5dd5f70e84">max</a>)</td></tr>
<tr class="memdesc:gabff36b1d8ccaf72b089c8776573a00e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">sets throttle range of the mixer (can be used to set 3d throttle range too)  <a href="#gabff36b1d8ccaf72b089c8776573a00e8">More...</a><br /></td></tr>
<tr class="separator:gabff36b1d8ccaf72b089c8776573a00e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga724983e86f9da0e57f4aa4ec495d2d87"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MIXER.html#ga724983e86f9da0e57f4aa4ec495d2d87">mixer_update</a> (struct <a class="el" href="structmixer.html">mixer</a> *self)</td></tr>
<tr class="memdesc:ga724983e86f9da0e57f4aa4ec495d2d87"><td class="mdescLeft">&#160;</td><td class="mdescRight">calculates outputs from all mixer inputs and mixing rules  <a href="#ga724983e86f9da0e57f4aa4ec495d2d87">More...</a><br /></td></tr>
<tr class="separator:ga724983e86f9da0e57f4aa4ec495d2d87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2250ad03e802112ed15b702ba86faaf4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MIXER.html#ga2250ad03e802112ed15b702ba86faaf4">mixer_enable_armed</a> (struct <a class="el" href="structmixer.html">mixer</a> *self, bool on)</td></tr>
<tr class="memdesc:ga2250ad03e802112ed15b702ba86faaf4"><td class="mdescLeft">&#160;</td><td class="mdescRight">arms/disarms the mixer (when disarmed, motor outputs will be set to disarmed pwm values. These are reset to either midrc when in 3d mode or to mincommand when not in 3d mode)  <a href="#ga2250ad03e802112ed15b702ba86faaf4">More...</a><br /></td></tr>
<tr class="separator:ga2250ad03e802112ed15b702ba86faaf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad159e060c41bada3e06ecb889517533e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MIXER.html#gad159e060c41bada3e06ecb889517533e">mixer_motor_limit_reached</a> (struct <a class="el" href="structmixer.html">mixer</a> *self)</td></tr>
<tr class="memdesc:gad159e060c41bada3e06ecb889517533e"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns true if mixer has determined that motor limit has been reached  <a href="#gad159e060c41bada3e06ecb889517533e">More...</a><br /></td></tr>
<tr class="separator:gad159e060c41bada3e06ecb889517533e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab6ecb3be636e39dc1582e4bb448c3bf7"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MIXER.html#gab6ecb3be636e39dc1582e4bb448c3bf7">mixer_get_motor_count</a> (struct <a class="el" href="structmixer.html">mixer</a> *self)</td></tr>
<tr class="memdesc:gab6ecb3be636e39dc1582e4bb448c3bf7"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the number of motors that are currently being controlled by mixer profile  <a href="#gab6ecb3be636e39dc1582e4bb448c3bf7">More...</a><br /></td></tr>
<tr class="separator:gab6ecb3be636e39dc1582e4bb448c3bf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaec0e6d4ba020b8ae1b3d593afdbd4586"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MIXER.html#gaec0e6d4ba020b8ae1b3d593afdbd4586">mixer_get_servo_count</a> (struct <a class="el" href="structmixer.html">mixer</a> *self)</td></tr>
<tr class="memdesc:gaec0e6d4ba020b8ae1b3d593afdbd4586"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns number of servos that are used by the mixer.  <a href="#gaec0e6d4ba020b8ae1b3d593afdbd4586">More...</a><br /></td></tr>
<tr class="separator:gaec0e6d4ba020b8ae1b3d593afdbd4586"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">The rewritten universal aircraft mixer<h1>Mixer </h1>
<dl class="section author"><dt>Author</dt><dd>Rewrite: Martin Schr√∂der <a href="#" onclick="location.href='mai'+'lto:'+'mks'+'ch'+'red'+'er'+'.uk'+'@g'+'mai'+'l.'+'com'; return false;">mksch<span style="display: none;">.nosp@m.</span>rede<span style="display: none;">.nosp@m.</span>r.uk@<span style="display: none;">.nosp@m.</span>gmai<span style="display: none;">.nosp@m.</span>l.com</a> </dd>
<dd>
Original: Cleanflight</dd></dl>
<p>The primary job of a mixer is to translate inputs from the flight controller into linear or angular movement of the aircraft body. The mixer does this by taking into account frame and thrust configuration and generating actuator values for required control surfaces.<h2>Inputs to the mixer </h2>
Mixer inputs are divided into 4 groups:</p><ul>
<li>MIXER_INPUT_GROUP_FC: group 0, flight controller stabilization inputs</li>
<li>MIXER_INPUT_GROUP_1: group 1, reserved</li>
<li>MIXER_INPUT_GROUP_GIMBAL: group 2, gimbal controls (also used by tilt drone)</li>
<li>MIXER_INPUT_GROUP_RC: group 3, rc controls</li>
<li>MIXER_INPUT_GROUP_MOTOR_PASSTHROUGH: group 4, motor passthrough</li>
</ul>
Each input group contains 8 inputs and can be referenced by the mixer rules.All inputs must be in range -500 to +500.<h2>Outputs of the mixer </h2>
Mixer outputs are divided into 2 groups:</p><ul>
<li>Motors</li>
<li>Servos</li>
</ul>
Motor outpus are constrained by minthrottle and maxthrottle and centered at midthrottle value.Mixer will automatically forward servo outputs from RC_AUX1 channel and onwards into servo slots that come after the servos that are used by the mixer.Servo outputs are scaled and limited according to the ninjaflight servo configuration.<h2>Mixer rules </h2>
All mixer rules are additive to the given output channel. Each rule defines a scale operation for a particular input to the mixer.<h2>Mixer Unit Tests </h2>
This is a summary of automatic tests that are done against the mixer module to guarantee that the module behaves according to the requirements set forth below.<ul>
<li>When mixer is started and not armed it will output G4 inputs as passthrough to the motors and will output midrc values on servos. When armed, mixer shall output minimum value that was set by mixer_set_throttle_range.</li>
<li>3d mode is set in mixer using <a class="el" href="group__MIXER.html#gabff36b1d8ccaf72b089c8776573a00e8" title="sets throttle range of the mixer (can be used to set 3d throttle range too) ">mixer_set_throttle_range()</a>. TODO: this test needs to be improved.</li>
<li>When mixer is disarmed it should pass MIXER_INPUT_G4_Mx inputs to the motors and should keep servos at midpoint.</li>
<li>Inputs in group G3 that correspond to AUX channels should always be automatically forwarded to servos that are not controlled by the mixer (starting with the next servo after the last one that is controlled by the mixer rules). TODO: make sure that this output is mixed according to servo configuration rules.</li>
<li>Mixer scales motor output such that differential thrust is maintained as much as possible. If some motors are above maximum output range, mixer moves all motors down such that the difference between motor with least thrust and motor with most thrust is maintained. If both top and bottom limits are exceeded then all motors are scaled to fit in the allowed output range.</li>
<li>Motors that are unused by the mixer are always held at <em>mincommand</em> setting as specified in the mixer configuration. This only applies to motor outputs (not servos).</li>
<li>Mixer has basic tolerance against invalid configuration values. Values are constrained in some places. Do keep configuration valid for best result. </li>
</ul>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ga8f455127e5b0a5e7f8f3e1b9df164f3c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__MIXER.html#ga8f455127e5b0a5e7f8f3e1b9df164f3c">mixer_flags</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="gga8f455127e5b0a5e7f8f3e1b9df164f3ca336b47f092a05ec681ab024a7b25fe9e"></a>MIXER_FLAG_ARMED&#160;</td><td class="fielddoc">
<p>mixer has to be armed in order to make motor calculations. Motor values are set to either mincommand or minthrottle depending on whether motor stop is enabled </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gadc257851e57bc3de20fe776f8fca0a78"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mixer_clear_rules </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmixer.html">mixer</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>saves motor mixer into cleanflight motor mixer format </p>
<p>loads a set of motor mixing rules from cleanflight format into current ruleset save servo mixer into cleanflight servo mixer format (sets some fields to defaults) loads servo mixing rules from cleanflight format into internal format clears all mixing rules </p>

</div>
</div>
<a class="anchor" id="ga2250ad03e802112ed15b702ba86faaf4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mixer_enable_armed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmixer.html">mixer</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>on</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>arms/disarms the mixer (when disarmed, motor outputs will be set to disarmed pwm values. These are reset to either midrc when in 3d mode or to mincommand when not in 3d mode) </p>
<p>puts mixer into armed state so that outputs are calculated (TODO: this should probably be placed outside of the mixer!) </p>

</div>
</div>
<a class="anchor" id="gab6ecb3be636e39dc1582e4bb448c3bf7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t mixer_get_motor_count </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmixer.html">mixer</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns the number of motors that are currently being controlled by mixer profile </p>
<p>returns total number of motors that are being actively mixed by the mixer as part of current profile </p>

</div>
</div>
<a class="anchor" id="gaec0e6d4ba020b8ae1b3d593afdbd4586"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t mixer_get_servo_count </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmixer.html">mixer</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns number of servos that are used by the mixer. </p>
<p>returns total number of servos that are being actively mxier by the mixer as part of current profile </p>

</div>
</div>
<a class="anchor" id="ga1ac8758754f82b6ad750ed377c154733"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mixer_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmixer.html">mixer</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structconfig.html">config</a> const *&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structsystem__calls__pwm.html">system_calls_pwm</a> *&#160;</td>
          <td class="paramname"><em>pwm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes an empty mixer objects clearing memory first. </p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__MIXER_ga1ac8758754f82b6ad750ed377c154733_cgraph.png" border="0" usemap="#group__MIXER_ga1ac8758754f82b6ad750ed377c154733_cgraph" alt=""/></div>
<map name="group__MIXER_ga1ac8758754f82b6ad750ed377c154733_cgraph" id="group__MIXER_ga1ac8758754f82b6ad750ed377c154733_cgraph">
<area shape="rect" id="node2" href="group__MIXER.html#gabff36b1d8ccaf72b089c8776573a00e8" title="sets throttle range of the mixer (can be used to set 3d throttle range too) " alt="" coords="134,5,261,46"/><area shape="rect" id="node3" href="maths_8c.html#adcad298527436e28d347ba411cf2d28d" title="constrain" alt="" coords="309,12,384,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaedfa8863c1b4819082c4349bc4f053be"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mixer_input_command </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmixer.html">mixer</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="config_2mixer_8h.html#a0d4a27769492fd12822190587e6b482a">mixer_input_t</a>&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>inputs a command to one of the input channels of the mixer </p>
<p>Inputs a command into the mixer. Valid range is [-500 to 500];</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>the channel to set </td></tr>
    <tr><td class="paramname">value</td><td>the value of the channel. Zero centered and between -500 to 500 </td></tr>
  </table>
  </dd>
</dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__MIXER_gaedfa8863c1b4819082c4349bc4f053be_cgraph.png" border="0" usemap="#group__MIXER_gaedfa8863c1b4819082c4349bc4f053be_cgraph" alt=""/></div>
<map name="group__MIXER_gaedfa8863c1b4819082c4349bc4f053be_cgraph" id="group__MIXER_gaedfa8863c1b4819082c4349bc4f053be_cgraph">
<area shape="rect" id="node2" href="maths_8c.html#adcad298527436e28d347ba411cf2d28d" title="constrain" alt="" coords="208,5,283,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gad159e060c41bada3e06ecb889517533e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mixer_motor_limit_reached </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmixer.html">mixer</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns true if mixer has determined that motor limit has been reached </p>
<p>tests if any of the motors have reached their limit (usually maxthrottle) </p>

</div>
</div>
<a class="anchor" id="gabff36b1d8ccaf72b089c8776573a00e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mixer_set_throttle_range </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmixer.html">mixer</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>mid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>sets throttle range of the mixer (can be used to set 3d throttle range too) </p>
<p>Sets throttle range for scaling motor values. All outputs will be centered at mid throttle and will be clipped to min/max range (this works because all inputs are -500 to 500).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mid</td><td>the middle throttle value on which outputs will be centered. </td></tr>
    <tr><td class="paramname">min</td><td>minimum possible output value </td></tr>
    <tr><td class="paramname">max</td><td>maximum possible output value </td></tr>
  </table>
  </dd>
</dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__MIXER_gabff36b1d8ccaf72b089c8776573a00e8_cgraph.png" border="0" usemap="#group__MIXER_gabff36b1d8ccaf72b089c8776573a00e8_cgraph" alt=""/></div>
<map name="group__MIXER_gabff36b1d8ccaf72b089c8776573a00e8_cgraph" id="group__MIXER_gabff36b1d8ccaf72b089c8776573a00e8_cgraph">
<area shape="rect" id="node2" href="maths_8c.html#adcad298527436e28d347ba411cf2d28d" title="constrain" alt="" coords="181,12,256,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga724983e86f9da0e57f4aa4ec495d2d87"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mixer_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmixer.html">mixer</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>calculates outputs from all mixer inputs and mixing rules </p>
<p>Updates the outputs based on mixing rules from the inputs. Expects inputs to be set using mixer_input_* command.</p>
<p>If mixer is in disarmed state then it will forward group 4 inputs (motor passthrough) to the outputs. This feature can be used to test motors when mixer is not mixing (without changing mixing mode). </p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__MIXER_ga724983e86f9da0e57f4aa4ec495d2d87_cgraph.png" border="0" usemap="#group__MIXER_ga724983e86f9da0e57f4aa4ec495d2d87_cgraph" alt=""/></div>
<map name="group__MIXER_ga724983e86f9da0e57f4aa4ec495d2d87_cgraph" id="group__MIXER_ga724983e86f9da0e57f4aa4ec495d2d87_cgraph">
<area shape="rect" id="node2" href="maths_8c.html#adcad298527436e28d347ba411cf2d28d" title="constrain" alt="" coords="180,5,255,32"/><area shape="rect" id="node3" href="group__config.html#ga547d1cb3ff0bbd0bb7381c73155ca8dd" title="config_get_profile" alt="" coords="155,56,279,83"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Dec 12 2016 15:48:58 for NinjaFlight by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
