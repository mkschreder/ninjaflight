<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>NinjaFlight: Board - CC3D</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NinjaFlight
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_docs_Board_-_CC3D.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Board - CC3D </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The OpenPilot Copter Control 3D aka CC3D is a board more tuned to Acrobatic flying or GPS based auto-piloting. It only has one sensor, the MPU6000 SPI based Accelerometer/Gyro. It also features a 16Mbit SPI based EEPROM chip. It has 6 ports labeled as inputs (one pin each) and 6 ports labeled as motor/servo outputs (3 pins each).</p>
<p>If issues are found with this board please report via the <a href="https://github.com/cleanflight/cleanflight/issues">github issue tracker</a>.</p>
<p>The board has a USB port directly connected to the processor. Other boards like the Naze and Flip32 have an on-board USB to uart adapter which connect to the processor's serial port instead.</p>
<p>The board cannot currently be used for hexacopters/octocopters.</p>
<p>Tricopter &amp; Airplane support is untested, please report success or failure if you try it.</p>
<h1>Pinouts</h1>
<p>The 8 pin RC_Input connector has the following pinouts when used in RX_PPM/RX_SERIAL mode</p>
<table class="doxtable">
<tr>
<th>Pin </th><th>Function </th><th>Notes  </th></tr>
<tr>
<td>1 </td><td>Ground </td><td></td></tr>
<tr>
<td>2 </td><td>+5V </td><td></td></tr>
<tr>
<td>3 </td><td>Unused </td><td></td></tr>
<tr>
<td>4 </td><td>SoftSerial1 TX / Sonar trigger </td><td></td></tr>
<tr>
<td>5 </td><td>SoftSerial1 RX / Sonar Echo / RSSI_ADC </td><td>Used either for SOFTSERIAL, SONAR or RSSI_ADC*. Only one feature can be enabled at any time. </td></tr>
<tr>
<td>6 </td><td>Current </td><td>Enable <code>feature CURRENT_METER</code>. Connect to the output of a current sensor, 0v-3.3v input </td></tr>
<tr>
<td>7 </td><td>Battery Voltage sensor </td><td>Enable <code>feature VBAT</code>. Connect to main battery using a voltage divider, 0v-3.3v input </td></tr>
<tr>
<td>8 </td><td>PPM Input </td><td>Enable <code>feature RX_PPM</code> </td></tr>
</table>
<p>*Connect to the output of a PWM-RSSI conditioner, 0v-3.3v input.</p>
<p>The 6 pin RC_Output connector has the following pinouts when used in RX_PPM/RX_SERIAL mode</p>
<table class="doxtable">
<tr>
<th>Pin </th><th>Function </th><th>Notes  </th></tr>
<tr>
<td>1 </td><td>MOTOR 1 </td><td></td></tr>
<tr>
<td>2 </td><td>MOTOR 2 </td><td></td></tr>
<tr>
<td>3 </td><td>MOTOR 3 </td><td></td></tr>
<tr>
<td>4 </td><td>MOTOR 4 </td><td></td></tr>
<tr>
<td>5 </td><td>LED Strip </td><td></td></tr>
<tr>
<td>6 </td><td>Unused </td><td></td></tr>
</table>
<p>The 8 pin RC_Input connector has the following pinouts when used in RX_PARALLEL_PWM mode</p>
<table class="doxtable">
<tr>
<th>Pin </th><th>Function </th><th>Notes  </th></tr>
<tr>
<td>1 </td><td>Ground </td><td></td></tr>
<tr>
<td>2 </td><td>+5V </td><td></td></tr>
<tr>
<td>3 </td><td>Unused </td><td></td></tr>
<tr>
<td>4 </td><td>CH1 </td><td></td></tr>
<tr>
<td>5 </td><td>CH2 </td><td></td></tr>
<tr>
<td>6 </td><td>CH3 </td><td></td></tr>
<tr>
<td>7 </td><td>CH4/Battery Voltage sensor </td><td>CH4 if battery voltage sensor is disabled </td></tr>
<tr>
<td>8 </td><td>CH5/CH4 </td><td>CH4 if battery voltage monitor is enabled </td></tr>
</table>
<p>The 6 pin RC_Output connector has the following pinouts when used in RX_PARALLEL_PWM mode</p>
<table class="doxtable">
<tr>
<th>Pin </th><th>Function </th><th>Notes  </th></tr>
<tr>
<td>1 </td><td>MOTOR 1 </td><td></td></tr>
<tr>
<td>2 </td><td>MOTOR 2 </td><td></td></tr>
<tr>
<td>3 </td><td>MOTOR 3 </td><td></td></tr>
<tr>
<td>4 </td><td>MOTOR 4 </td><td></td></tr>
<tr>
<td>5 </td><td>Unused </td><td></td></tr>
<tr>
<td>6 </td><td>Unused </td><td></td></tr>
</table>
<h1>Serial Ports</h1>
<table class="doxtable">
<tr>
<th>Value </th><th>Identifier </th><th>Board Markings </th><th>Notes  </th></tr>
<tr>
<td>1 </td><td>VCP </td><td>USB PORT </td><td></td></tr>
<tr>
<td>2 </td><td>USART1 </td><td>MAIN PORT </td><td>Connected to an MCU controllable inverter </td></tr>
<tr>
<td>3 </td><td>USART3 </td><td>FLEX PORT </td><td></td></tr>
<tr>
<td>4 </td><td>SoftSerial </td><td>RC connector </td><td>Pins 4 and 5 (Tx and Rx respectively) </td></tr>
</table>
<p>The SoftSerial port is not available when RX_PARALLEL_PWM is used. The transmission data rate is limited to 19200 baud.</p>
<p>To connect the GUI to the flight controller you just need a USB cable to use the Virtual Com Port (VCP) or you can use UART1 (Main Port).</p>
<p>CLI access is only available via the VCP by default.</p>
<h1>Main Port</h1>
<p>The main port has MSP support enabled on it by default.</p>
<p>The main port is connected to an inverter which is automatically enabled as required. For example, if the main port is used for SBus Serial RX then an external inverter is not required.</p>
<h1>Flex Port</h1>
<p>The flex port will be enabled in I2C mode unless USART3 is used. You can connect external I2C sensors and displays to this port.</p>
<p>You cannot use USART3 and I2C at the same time.</p>
<h2>Flex port pinout</h2>
<table class="doxtable">
<tr>
<th>Pin </th><th>Signal </th><th>Notes  </th></tr>
<tr>
<td>1 </td><td>GND </td><td></td></tr>
<tr>
<td>2 </td><td>VCC unregulated </td><td></td></tr>
<tr>
<td>3 </td><td>I2C SCL / UART3 TX </td><td>3.3v level </td></tr>
<tr>
<td>4 </td><td>I2C SDA / UART3 RX </td><td>3.3v level (5v tolerant </td></tr>
</table>
<h1>Flashing</h1>
<p>There are two primary ways to get Cleanflight onto a CC3D board.</p>
<ul>
<li>Single binary image mode - best mode if you don't want to use OpenPilot.</li>
<li>OpenPilot Bootloader compatible image mode - best mode if you want to switch between OpenPilot and Cleanflight.</li>
</ul>
<h2>Single binary image mode.</h2>
<p>The entire flash ram on the target processor is flashed with a single image.</p>
<p>The image can be flashed by using a USB to UART adapter connected to the main port when the CC3D is put into the STM32 bootloader mode, achieved by powering on the CC3D with the SBL/3.3v pads bridged.</p>
<h2>OpenPilot Bootloader compatible image mode.</h2>
<p>The initial section of flash ram on the target process is flashed with a bootloader which can then run the code in the remaining area of flash ram.</p>
<p>The OpenPilot bootloader code also allows the remaining section of flash to be reconfigured and re-flashed by the OpenPilot Ground Station (GCS) via USB without requiring a USB to uart adapter.</p>
<p>The following features are not available:</p><ul>
<li>Display</li>
<li>Sonar</li>
</ul>
<h1>Restoring OpenPilot bootloader</h1>
<p>If you have a JLink debugger, you can use JLinkExe to flash the open pilot bootloader.</p>
<ol type="1">
<li>Run JLinkExe <code>/Applications/SEGGER/JLink/JLinkExe</code></li>
<li><code>device STM32F103CB</code></li>
<li><code>r</code></li>
<li><code>h</code></li>
<li><code>loadbin opbl.bin, 0x08000000</code></li>
<li><code>q</code></li>
<li>Re-plug CC3D.</li>
</ol>
<p>Here's an example session:</p>
<p>``` $ /Applications/SEGGER/JLink/JLinkExe SEGGER J-Link Commander V4.90c ('?' for help) Compiled Aug 29 2014 09:52:38 DLL version V4.90c, compiled Aug 29 2014 09:52:33 Firmware: J-Link ARM-OB STM32 compiled Aug 22 2012 19:52:04 Hardware: V7.00 S/N: -1 Feature(s): RDI,FlashDL,FlashBP,JFlash,GDBFull VTarget = 3.300V Info: Could not measure total IR len. TDO is constant high. Info: Could not measure total IR len. TDO is constant high. No devices found on JTAG chain. Trying to find device on SWD. Info: Found SWD-DP with ID 0x1BA01477 Info: Found Cortex-M3 r1p1, Little endian. Info: FPUnit: 6 code (BP) slots and 2 literal slots Info: TPIU fitted. Cortex-M3 identified. Target interface speed: 100 kHz J-Link&gt;device STM32F103CB Info: Device "STM32F103CB" selected (128 KB flash, 20 KB RAM). Reconnecting to target... Info: Found SWD-DP with ID 0x1BA01477 Info: Found SWD-DP with ID 0x1BA01477 Info: Found Cortex-M3 r1p1, Little endian. Info: FPUnit: 6 code (BP) slots and 2 literal slots Info: TPIU fitted. J-Link&gt;r Reset delay: 0 ms Reset type NORMAL: Resets core &amp; peripherals via SYSRESETREQ &amp; VECTRESET bit. J-Link&gt;h PC = 0800010C, CycleCnt = 00000000 R0 = 0000000C, R1 = 0000003F, R2 = 00000000, R3 = 00000008 R4 = 00003000, R5 = 023ACEFC, R6 = 200000F0, R7 = 20000304 R8 = 023B92BC, R9 = 00000000, R10= ED691105, R11= F626177C R12= 000F0000 SP(R13)= 20000934, MSP= 20000934, PSP= 20000934, R14(LR) = FFFFFFFF XPSR = 01000000: APSR = nzcvq, EPSR = 01000000, IPSR = 000 (NoException) CFBP = 00000000, CONTROL = 00, FAULTMASK = 00, BASEPRI = 00, PRIMASK = 00 J-Link&gt;loadbin opbl.bin, 0x08000000 Downloading file [opbl.bin]... WARNING: CPU is running at low speed (8004 kHz). Info: J-Link: Flash download: Flash download into internal flash skipped. Flash contents already match Info: J-Link: Flash download: Total time needed: 0.898s (Prepare: 0.709s, Compare: 0.128s, Erase: 0.000s, Program: 0.000s, Verify: 0.000s, Restore: 0.059s) O.K. J-Link&gt;q $ ``` </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Dec 12 2016 15:48:58 for NinjaFlight by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
