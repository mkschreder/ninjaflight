<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>NinjaFlight: Ninjaflight Tilt Support</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NinjaFlight
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_docs_tilt-props.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Ninjaflight Tilt Support </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>For tilted propeller quads, ninjaflight provides yaw and roll compensation as well as throttle compensation for cases where tilt is dynamic (ie controlled through a radio channel).</p>
<h2>Commands </h2>
<ul>
<li>tilt [pitch|roll] motor [NONE|PITCH|ROLL|AUX1|AUX2] - this command sets the rc channel to be used for pitch tilt. If the channel is set to PITCH then rc pitch will control propeller tilt during flight and flight controller will try to stabilize the body (by assuming that requested pitch angle of the body is always static).</li>
<li>tilt [pitch|roll] body [NONE|AUX1|AUX2] - sets the channel to be used to control body pitch independently of the propeller pitch. This allows body to change pitch while leaving propeller pitch the same relative to earth frame.</li>
<li>tilt [pitch|roll] angle [value -maxangle to +maxangle] - sets static angle for either axis. Only used when mode is set to static.</li>
<li>tilt mode [dynamic|static|disabled] - sets the mode used for tilt. In dynamic mode the pitch and roll body/motor channels are used for controlling the tilting function. In static mode the "angle" setting is used as a static value for calculating flight compensation values.</li>
<li>tilt [pitch|roll] servorange [min] [max] - controlls the minimum and maximum angle of the propellers relative to earth frame (valid range -45 to 45 deg, min must be smaller than max). Note that this setting is also limited by physical characteristics of the frame design and the servo travel.</li>
</ul>
<h2>Different flight modes </h2>
<p>The behaviour of the tilting logic is dependent on the flight mode that is being used.</p>
<ul>
<li>RATE mode: tilt angle must be controlled using one of the AUX channels. If one of the tilt channels is set to be controlled using pitch or roll stick then that function is ignored and middle value is used instead. Flight controller compensates when yawing. Roll and pitch sticks tilt the multirotor as in normal rate mode. This mode is useful for tilting props into a certain angle and then keeping them tilted at the same angle during most of the flight. This mode can also be used with statically tilted props.</li>
<li>ANGLE mode: when pitch/roll is used as tilt channel, the controller will feed body tilt channel to the angle/rate controller as the amount of tilt to apply to the body and the pitch/roll channel controls tilting of the propellers. When body angle is set to zero or the channel is set to NONE, the quad essentially tilts the propellers to go forward and sideways while keeping the body stable in the air.</li>
<li>HORIZON mode: when sticks are around center position, the pitch/roll stick controls the tilt of the propellers. As stick moves to the extreme positions the body starts to tilt as well as it usually would do in normal RATE mode. This mode allows acro/racing flight.</li>
</ul>
<p>When in ANGLE or HORIZON modes the controller will try to level the propellers regardless of the desired body angle so that the thrust is pointing upwards.</p>
<h2>Configuring for TILT Ranger </h2>
<p>The TILT Ranger drone uses tilting propellers for pitch angle. Frame needs to be set to "QuadX Tilt 1 Servo". The mode needs to be dynamic and pitch tilt channel needs to be set to PITCH. Body channel can be left as default (NONE) or set to one of the AUX channels. </p><pre class="fragment">tilt mode dynamic
tilt pitch motor PITCH
tilt roll motor NONE
tilt pitch body NONE</pre> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Dec 12 2016 15:48:58 for NinjaFlight by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
