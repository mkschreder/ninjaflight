<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>NinjaFlight: Building in Ubuntu</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NinjaFlight
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_docs_development_Building_in_Ubuntu.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Building in Ubuntu </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Building for Ubuntu platform is remarkably easy. The only trick to understand is that the Ubuntu toolchain, which they are downstreaming from Debian, is not compatible with Cleanflight. We suggest that you take an alternative PPA from Terry Guo, found here: <a href="https://launchpad.net/~terry.guo/+archive/ubuntu/gcc-arm-embedded">https://launchpad.net/~terry.guo/+archive/ubuntu/gcc-arm-embedded</a></p>
<p>This PPA has several compiler versions and platforms available. For many hardware platforms (notably Naze) the 4.9.3 compiler will work fine. For some, older compiler 4.8 (notably Sparky) is more appropriate. We suggest you build with 4.9.3 first, and try to see if you can connect to the CLI or run the Configurator. If you cannot, please see the section below for further hints on what you might do.</p>
<h2>Setup GNU ARM Toolchain</h2>
<p>Note specifically the last paragraph of Terry's PPA documentation &ndash; Ubuntu carries its own package for <code>gcc-arm-none-eabi</code>, so you'll have to remove it, and then pin the one from the PPA. For your release, you should first remove any older pacakges (from Debian or Ubuntu directly), introduce Terry's PPA, and update: ``` sudo apt-get remove binutils-arm-none-eabi gcc-arm-none-eabi sudo add-apt-repository ppa:terry.guo/gcc-arm-embedded sudo apt-get update ```</p>
<p>For Ubuntu 14.10 (current release, called Utopic Unicorn), you should pin: ``` sudo apt-get install gcc-arm-none-eabi=4.9.3.2014q4-0utopic12 ```</p>
<p>For Ubuntu 14.04 (an LTS as of Q1'2015, called Trusty Tahr), you should pin: ``` sudo apt-get install gcc-arm-none-eabi=4.9.3.2014q4-0trusty12 ```</p>
<p>For Ubuntu 12.04 (previous LTS, called Precise Penguin), you should pin: ``` sudo apt-get install gcc-arm-none-eabi=4.9.3.2014q4-0precise12 ```</p>
<h2>Building on Ubuntu</h2>
<p>After the ARM toolchain from Terry is installed, you should be able to build from source. ``` cd src git clone <a href="#" onclick="location.href='mai'+'lto:'+'git'+'@g'+'ith'+'ub'+'.co'+'m'; return false;">git@g<span style="display: none;">.nosp@m.</span>ithu<span style="display: none;">.nosp@m.</span>b.com</a>:cleanflight/cleanflight.git cd cleanflight make TARGET=NAZE ```</p>
<p>You'll see a set of files being compiled, and finally linked, yielding both an ELF and then a HEX: ``` ... arm-none-eabi-size ./obj/main/cleanflight_NAZE.elf text data bss dec hex filename 97164 320 11080 108564 1a814 ./obj/main/cleanflight_NAZE.elf arm-none-eabi-objcopy -O ihex &ndash;set-start 0x8000000 obj/main/cleanflight_NAZE.elf obj/cleanflight_NAZE.hex $ ls -la obj/cleanflight_NAZE.hex -rw-rw-r&ndash; 1 pim pim 274258 Jan 12 21:45 obj/cleanflight_NAZE.hex ```</p>
<p>You can use the Cleanflight-Configurator to flash the <code>obj/cleanflight_NAZE.hex</code> file.</p>
<h2>Bricked/Bad build?</h2>
<p>Users have reported that the 4.9.3 compiler for ARM produces bad builds, for example on the Sparky hardware platform. It is very likely that using an older compiler would be fine &ndash; Terry happens to have also a 4.8 2014q2 build in his PPA - to install this, you can fetch the <code>.deb</code> directly: <a href="http://ppa.launchpad.net/terry.guo/gcc-arm-embedded/ubuntu/pool/main/g/gcc-arm-none-eabi/">http://ppa.launchpad.net/terry.guo/gcc-arm-embedded/ubuntu/pool/main/g/gcc-arm-none-eabi/</a></p>
<p>and use <code>dpkg</code> to install: ``` sudo dpkg -i gcc-arm-none-eabi_4-8-2014q2-0saucy9_amd64.deb ```</p>
<p>Make sure to remove <code>obj/</code> and <code>make clean</code>, before building again.</p>
<h2>Updating and rebuilding</h2>
<p>Navigate to the local cleanflight repository and use the following steps to pull the latest changes and rebuild your version of cleanflight:</p>
<p>``` cd src/cleanflight git reset &ndash;hard git pull make clean TARGET=NAZE make ```</p>
<p>Credit goes to K.C. Budd, AKfreak for testing, and pulsar for doing the long legwork that yielded this very short document. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Dec 12 2016 15:48:58 for NinjaFlight by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
