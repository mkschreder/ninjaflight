<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>NinjaFlight: In-flight Adjustments</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NinjaFlight
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_docs_Inflight_Adjustments.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">In-flight Adjustments </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>With Cleanflight it's possible to make adjustments to various settings by using AUX channels from your transmitter while the aircraft is flying.</p>
<h2>Warning</h2>
<p>Changing settings during flight can make your aircraft unstable and crash if you are not careful.</p>
<h2>Recommendations</h2>
<ul>
<li>Always make adjustments while flying in a large open area.</li>
<li>Make small adjustments and fly carefully to test your adjustment.</li>
<li>Give yourself enough flying space and time to adjust to how your changes affect the behaviour of the aircraft.</li>
<li>Remember to set adjustment channel switches/pots to the center position before powering on your TX and your aircraft.</li>
<li>If possible configure switch warnings on your transitter for dedicated adjustment switches.</li>
<li>A momentary 3 position switch is the best choice of switch for this - i.e. one that re-centers itself when you let go of it.</li>
</ul>
<h2>Overview</h2>
<p>Up to 4 RX channels can be used to make different adjustments at the same time.</p>
<p>The adjustment a channel makes can be controlled by another channel.</p>
<p>The following adjustments can be made, in flight, as well as on the ground.</p>
<ul>
<li>RC Rate</li>
<li>RC Expo</li>
<li>Throttle Expo</li>
<li>Roll &amp; Pitch Rate</li>
<li>Yaw Rate</li>
<li>Pitch+Roll P I and D</li>
<li>Yaw P I and D</li>
</ul>
<p>Example scenarios: Up to 4 3-position switches or pots can be used to adjust 4 different settings at the same time. A single 2/3/4/5/6/x position switch can be used to make one 3 position switch adjust one setting at a time.</p>
<p>Any combination of switches and pots can be used. So you could have 6 POS switch.</p>
<p>Settings are not saved automatically, connect a GUI, refresh and save or save using stick position when disarmed. Powering off without saving will discard the adjustments.</p>
<p>Settings can be saved when disarmed using stick positions: Throttle Low, Yaw Left, Pitch Low, Roll Right.</p>
<h2>Adjustment switches</h2>
<p>The switch can be a ON-OFF-ON, POT or momentary ON-OFF-ON switch. The latter is recommended.</p>
<p>When the switch is returned to the center position the value will not be increased/decreased.</p>
<p>Each time you can press the switch high/low and then return it to the middle the value will change at least once, you do not have to wait before pressing the switch again if you want to increase/decrease at a faster rate. While the adjustment switch held is high/low, the adjustment function applies and increases/decreases the value being adjusted twice a second and the flight controller will beep shorter/longer, respectively. The system works similar to how a keyboard repeat delay works.</p>
<p>Hint: With OpenTX transmitters you can combine two momentary OFF-ON switches to control a single channel. You could make it so that a momentary switch on the left of your transmitter decreases the value and a momentary switch on the right increases the value. Experiment with your mixer!</p>
<h2>Configuration</h2>
<p>The CLI command <code>adjrange</code> is used to configure adjustment ranges.</p>
<p>12 adjustment ranges can be defined. 4 adjustments can be made at the same time, each simultaneous adjustment requires an adjustment slot.</p>
<p>Show the current ranges using:</p>
<p><code>adjrange</code></p>
<p>Configure a range using:</p>
<p><code>adjrange &lt;index&gt; &lt;slot&gt; &lt;range channel&gt; &lt;range start&gt; &lt;range end&gt; &lt;adjustment function&gt; &lt;adjustment channel&gt;</code></p>
<table class="doxtable">
<tr>
<th>Argument </th><th>Value </th><th>Meaning  </th></tr>
<tr>
<td>Index </td><td>0 - 11 </td><td>Select the adjustment range to configure </td></tr>
<tr>
<td>Slot </td><td>0 - 3 </td><td>Select the adjustment slot to use </td></tr>
<tr>
<td>Range Channel </td><td>0 based index, AUX1 = 0, AUX2 = 1 </td><td>The AUX channel to use to select an adjustment for a switch/pot </td></tr>
<tr>
<td>Range Start </td><td>900 - 2100. Steps of 25, e.g. 900, 925, 950... </td><td>Start of range </td></tr>
<tr>
<td>Range End </td><td>900 - 2100 </td><td>End of range </td></tr>
<tr>
<td>Adjustment function </td><td>0 - 11 </td><td>See Adjustment function table </td></tr>
<tr>
<td>Adjustment channel </td><td>0 based index, AUX1 = 0, AUX2 = 1 </td><td>The channel that is controlled by a 3 Position switch/Pot </td></tr>
</table>
<p>Range Start/End values should match the values sent by your receiver.</p>
<p>Normally Range Channel and Slot values are grouped together over multiple adjustment ranges.</p>
<p>The Range Channel and the Adjustment Channel can be the same channel. This is useful when you want a single 3 Position switch to be dedicated to a single adjustment function regardless of other switch positions.</p>
<p>The adjustment function is applied to the adjustment channel when range channel is between the range values. The adjustment is made when the adjustment channel is in the high or low position. high = mid_rc + 200, low = mid_rc - 200. by default this is 1700 and 1300 respectively.</p>
<p>When the Range Channel does not fall into Start/End range the assigned slot will retain it's state and will continue to apply the adjustment. For this reason ensure that you define enough ranges to cover the range channel's usable range.</p>
<h3>Adjustment function</h3>
<p>| Value | Adjustment | Notes | | --&mdash; | -------&mdash; |---&mdash; | | 0 | None | | 1 | RC RATE | | 2 | RC_EXPO | | 3 | THROTTLE_EXPO | | 4 | PITCH_ROLL_RATE | | 5 | YAW_RATE | | 6 | PITCH_ROLL_P | | 7 | PITCH_ROLL_I | | 8 | PITCH_ROLL_D | | 9 | YAW_P | | 10 | YAW_I | | 11 | YAW_D | | 12 | RATE_PROFILE | Switch between 3 rate profiles using a 3 position switch. | | 13 | PITCH_RATE | | 14 | ROLL_RATE | | 15 | PITCH_P | | 16 | PITCH_I | | 17 | PITCH_D | | 18 | ROLL_P | | 19 | ROLL_I | | 20 | ROLL_D |</p>
<h2>Examples</h2>
<h3>Example 1 - 3 Position switch used to adjust pitch/roll rate</h3>
<p>``` adjrange 0 0 3 900 2100 4 3 ```</p>
<p>explained:</p>
<ul>
<li>configure adjrange 0 to use adjustment slot 1 (0) so that when aux4 (3) in the range 900-2100 then use adjustment 4 (pitch/roll rate) when aux 4 (3) is in the appropriate position.</li>
</ul>
<h3>Example 2 - 2 Position switch used to enable adjustment of RC rate via a 3 position switch</h3>
<p>``` adjrange 1 1 0 900 1700 0 2 adjrange 2 1 0 1700 2100 1 2 ``` explained:</p>
<ul>
<li>configure adjrange 1 to use adjustment slot 2 (1) so that when aux1 (0) in the range 900-1700 then do nothing (0) when aux 3 (2) is in any position.</li>
<li>configure adjrange 2 to use adjustment slot 2 (1) so that when aux1 (0) in the range 1700-2100 then use adjustment rc rate (1) when aux 3 (2) is in the appropriate position.</li>
</ul>
<p>Without the entire range of aux1 being defined there is nothing that would stop aux 3 adjusting the pitch/roll rate once aux 1 wasn't in the higher range.</p>
<h3>Example 3 - 6 Position switch used to select PID tuning adjustments via a 3 position switch</h3>
<p>``` adjrange 3 2 1 900 1150 6 3 adjrange 4 2 1 1150 1300 7 3 adjrange 5 2 1 1300 1500 8 3 adjrange 6 2 1 1500 1700 9 3 adjrange 7 2 1 1700 1850 10 3 adjrange 8 2 1 1850 2100 11 3 ```</p>
<p>explained:</p>
<ul>
<li>configure adjrange 3 to use adjustment slot 3 (2) so that when aux2 (1) in the range 900-1150 then use adjustment Pitch/Roll P (6) when aux 4 (3) is in the appropriate position.</li>
<li>configure adjrange 4 to use adjustment slot 3 (2) so that when aux2 (1) in the range 1150-1300 then use adjustment Pitch/Roll I (7) when aux 4 (3) is in the appropriate position.</li>
<li>configure adjrange 5 to use adjustment slot 3 (2) so that when aux2 (1) in the range 1300-1500 then use adjustment Pitch/Roll D (8) when aux 4 (3) is in the appropriate position.</li>
<li>configure adjrange 6 to use adjustment slot 3 (2) so that when aux2 (1) in the range 1500-1700 then use adjustment Yaw P (9) when aux 4 (3) is in the appropriate position.</li>
<li>configure adjrange 7 to use adjustment slot 3 (2) so that when aux2 (1) in the range 1700-1850 then use adjustment Yaw I (10) when aux 4 (3) is in the appropriate position.</li>
<li>configure adjrange 8 to use adjustment slot 3 (2) so that when aux2 (1) in the range 1850-2100 then use adjustment Yaw D (11) when aux 4 (3) is in the appropriate position.</li>
</ul>
<h3>Example 4 - Use a single 3 position switch to change between 3 different rate profiles</h3>
<p>adjrange 11 3 3 900 2100 12 3</p>
<p>explained:</p>
<ul>
<li>configure adjrange 11 to use adjustment slot 4 (3) so that when aux4 (3) in the range 900-2100 then use adjustment Rate Profile (12) when aux 4 (3) is in the appropriate position.</li>
</ul>
<p>When the switch is low, rate profile 0 is selcted. When the switch is medium, rate profile 1 is selcted. When the switch is high, rate profile 2 is selcted.</p>
<h3>Configurator examples</h3>
<p>The following 5 images show valid configurations. In all cales the enture usable range for the Range Channel is used.</p>
<div class="image">
<img src="Screenshots/adjustments-rate-profile-selection-via-3pos.png"  alt="Configurator example 1"/>
</div>
 <hr/>
<div class="image">
<img src="Screenshots/adjustments-pitch-and-roll-rate-adjustment-via-3pos.png"  alt="Configurator example 2"/>
</div>
 <hr/>
<div class="image">
<img src="Screenshots/adjustments-pid-via-two-3pos.png"  alt="Configurator example 3"/>
</div>
 <hr/>
<div class="image">
<img src="Screenshots/adjustments-pid-via-6pos-and-3pos.png"  alt="Configurator example 4"/>
</div>
 <hr/>
<div class="image">
<img src="Screenshots/adjustments-rates-via-a-2pos-and-3pos.png"  alt="Configurator example 5"/>
</div>
<p>The following examples shows <b>incorrect</b> configurations - the entire usable range for the Range Channel is not used in both cases.</p>
<div class="image">
<img src="Screenshots/adjustments-incorrect-config-1.png"  alt="Configurator example 6"/>
</div>
 <div class="image">
<img src="Screenshots/adjustments-incorrect-config-2.png"  alt="Configurator example 7"/>
</div>
<p>In the following example, the incorrect configuraton (above) has been corrected by adding a range that makes 'No changes'.</p>
<div class="image">
<img src="Screenshots/adjustments-incorrect-config-2-corrected.png"  alt="Configurator example 7"/>
</div>
 </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Dec 12 2016 15:48:58 for NinjaFlight by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
